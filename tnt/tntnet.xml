<?xml version="1.0" encoding="UTF-8"?>
<tntnet>
  <mappings>
    <mapurl>
      <target>index@vablo</target>
      <url>^/$</url>
      <args>
        <context>blog</context>
      </args>
    </mapurl>
    <mapurl>
      <target>expire@vablo</target>
      <url>^/static/(.*)</url>
    </mapurl>
    <mapurl>
      <target>static@tntnet</target>
      <url>^/static/(.*)</url>
      <pathinfo>static/$1</pathinfo>
    </mapurl>
    <mapurl>
      <target>index@vablo</target>
      <url>^/page/(.*)</url>
      <args>
        <context>blog</context>
        <pagenum>$1</pagenum>
      </args>
    </mapurl>
    <mapurl>
      <target>article@vablo</target>
      <url>^/article/(.*)</url>
      <pathinfo>$1</pathinfo>
    </mapurl>
    <mapurl>
      <target>categories@vablo</target>
      <url>^/categories/([^/]+)/*(.*)</url>
      <args>
        <context>blog</context>
        <category>$1</category>
        <pagenum>$2</pagenum>
      </args>
    </mapurl>
    <mapurl>
      <target>comment_commit@vablo</target>
      <url>^/comment/commit</url>
    </mapurl>
    <mapurl>
      <target>comment_reply@vablo</target>
      <url>^/comment/([0-9]+$)</url>
      <pathinfo>$1</pathinfo>
    </mapurl>
    <mapurl>
      <target>comment@vablo</target>
      <url>^/comment/</url>
    </mapurl>
    <mapurl>
      <target>comments@vablo</target>
      <url>^/comments/([^/]+)/*(.*)</url>
      <args>
        <article>$1</article>
        <pagenum>$2</pagenum>
      </args>
    </mapurl>
    <mapurl>
      <target>feed_atom@vablo</target>
      <url>^/feed/atom</url>
      <args>
        <context>blog</context>
      </args>
    </mapurl>
    <mapurl>
      <target>error@vablo</target>
      <url>^/error/(.*)</url>
      <pathinfo>$1</pathinfo>
    </mapurl>
    <mapurl>
      <target>admin@vablo</target>
      <url>^/admin/$</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>admin@vablo</target>
      <url>^/admin/([0-9]+$)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>article_new@vablo</target>
      <url>^/admin/article/new</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>article_update@vablo</target>
      <url>^/admin/article/update/(.*)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>article_preview@vablo</target>
      <url>^/admin/article/preview</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>article_commit@vablo</target>
      <url>^/admin/article/commit</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>comment_update@vablo</target>
      <url>^/admin/comment/update</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>comment_update_commit@vablo</target>
      <url>^/admin/comment/commit</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>comment_update@vablo</target>
      <url>^/admin/comment/([0-9]+$)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>admin_comments@vablo</target>
      <url>^/admin/comments/([^/]+)/*(.*)</url>
      <vhost>.*:8443</vhost>
      <args>
        <article>$1</article>
        <pagenum>$2</pagenum>
      </args>
    </mapurl>
    <mapurl>
      <target>user_new@vablo</target>
      <url>^/admin/user/new</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>user_update@vablo</target>
      <url>^/admin/user/update/(.*)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>user_preview@vablo</target>
      <url>^/admin/user/preview</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>user_commit@vablo</target>
      <url>^/admin/user/commit</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>user_list@vablo</target>
      <url>^/admin/user/$</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>user_list@vablo</target>
      <url>^/admin/user/([0-9]+$)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_new@vablo</target>
      <url>^/admin/context/new</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_update@vablo</target>
      <url>^/admin/context/update/(.*)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_preview@vablo</target>
      <url>^/admin/context/preview</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_commit@vablo</target>
      <url>^/admin/context/commit</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_list@vablo</target>
      <url>^/admin/context/$</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>context_list@vablo</target>
      <url>^/admin/context/([0-9]+$)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>passwd_update@vablo</target>
      <url>^/admin/passwd/update/(.*)</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>passwd_commit@vablo</target>
      <url>^/admin/passwd/commit</url>
      <pathinfo>$1</pathinfo>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>login@vablo</target>
      <url>^/admin/login</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>logout@vablo</target>
      <url>^/admin/logout</url>
      <vhost>.*:8443</vhost>
    </mapurl>
    <mapurl>
      <target>error@vablo</target>
      <url>.</url>
      <pathinfo>404</pathinfo>
    </mapurl>
  </mappings>

  <listeners>
    <listener>
      <ip>0.0.0.0</ip>
      <port>8000</port>
    </listener>
    <listener>
      <ip>::</ip>
      <port>8000</port>
    </listener>
    <listener>
      <ip>0.0.0.0</ip>
      <port>8443</port>
      <certificate>vablo.pem</certificate>
    </listener>
    <listener>
      <ip>::</ip>
      <port>8443</port>
      <certificate>vablo.pem</certificate>
    </listener>
  </listeners>

  <daemon>1</daemon>
  <minThreads>50</minThreads>
  <maxThreads>1000</maxThreads>
  <threadStartDelay>10</threadStartDelay>
  <queueSize>5000</queueSize>
  <sessionTimeout>3600</sessionTimeout>
  <mimeDb>mime.types</mimeDb>
  <defaultContentType>text/html; charset=UTF-8</defaultContentType>
  <logging>
    <rootlogger>INFO</rootlogger>
    <loggers>
      <logger>
        <category>tntnet</category>
        <level>INFO</level>
      </logger>
    </loggers>
    <file>tntnet.log</file>
    <maxfilesize>1MB</maxfilesize>
    <maxbackupindex>2</maxbackupindex>
  </logging>

</tntnet>
